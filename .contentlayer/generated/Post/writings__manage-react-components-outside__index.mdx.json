{
  "title": "Creating & Managing components outside React",
  "date": "2018-07-27T00:00:00.000Z",
  "published": true,
  "description": "Can you use React in an existing/old JS project? If you do, how do you manage the components?",
  "tags": "web-development,javascript,reactjs,react",
  "banner": "banner.jpeg",
  "body": {
    "raw": "\nYou are probably not starting a new project with React in the frontend. You just want to build some components, make use of the apis that your frontend already consumes and use them in your existing application.\n\nAwesome! You can always do that. Let me outline the workflow here.\n\nTake the built output js file and include it your HTML(application). You would need to add React and ReactDOM to the HTML to mount the components on to the page.\n\n```javascript\nclass WelcomeComp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { name: '' };\n    if (props.name) this.state = { name: props.name };\n  }\n\n  updateName = (name) => this.setState({ name });\n\n  render() {\n    return <p>I am a React Component. Hello {this.state.name}</p>;\n  }\n}\n```\n\nThe transpiled version of the above code is most probably the output you would be getting from build system. (Webpack isnâ€™t mandatory. You can use gulp or grunt if you development is setup using them.)\n\nNext up is including things in your application. I am including directly into HTML.\n\n```html\n<html>\n  <head>\n    <title>Sandbox</title>\n    <meta charset=\"UTF-8\" />\n    <script src=\"<https://unpkg.com/react/umd/react.production.min.js>\"></script>\n    <script src=\"<https://unpkg.com/react-dom/umd/react-dom.production.min.js>\"></script>\n  </head>\n\n  <body>\n    <div id=\"app\"></div>\n    <div id=\"root\"></div>\n\n    <script src=\"build/existing.js\"></script>\n    <script src=\"build/WelcomeComp.js\"></script>\n    <script type=\"text/javascript\">\n      var rootEl = document.getElementById('root');\n      ReactDOM.render(React.createElement(WelcomeComp, null, null), rootEl);\n    </script>\n  </body>\n</html>\n```\n\nThis would mount the component to the root div. Remember you cannot use JSX here as the script in HTML has a type `text/javascript`. So we used `React.createElement()` instead of `<WelcomeComp />`.\n\n### The issue\n\nBut how would your Component communicate with the existing application? You could be fetching and sending requests from the component itself. Which would need some React code, that isnâ€™t an issue. But in some cases, you need the component to sync up with existing stores in your application.\n\nMaybe you have an ExtJS store or a RxJS store, maybe a MobX one. How do you sync the component with it? ðŸ¤”\n\n### React ref to our rescue\n\nYou can pass a reference to the component and store it as a local variable in the code. All the methods in the React Component can be accessed through those refs. Donâ€™t quite get it? Here is the code.\n\n```html\n<script type=\"text/javascript\">\n  var rootEl = document.getElementById('root');\n  var componentProps = {\n    name: 'Balla',\n    ref: function (ref) {\n      this.welcomeComp = ref;\n    },\n  };\n  ReactDOM.render(React.createElement(WelcomeComp, componentProps, null), rootEl);\n\n  setTimeout(function () {\n    this.welcomeComp.updateName('Aravind');\n  }, 2000);\n</script>\n```\n\nSyncing is easy now. When ever there is an update, you can just call a method that changes the Component state. See how I did it in a timeout. You can even pass methods that update the store, in the props, and make the Component call it whenever it has to update.\n\nKeep on hacking!\n\n### References\n\n- [https://reactjs.org/docs/react-without-jsx.html](https://reactjs.org/docs/react-without-jsx.html)\n- The transpiler usedâ€Š â€” â€Š[https://babeljs.io/repl/](https://babeljs.io/repl/)\n",
    "code": "var Component=(()=>{var l=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},c=(n,e,o,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of u(e))!g.call(n,a)&&a!==o&&i(n,a,{get:()=>e[a],enumerable:!(r=h(e,a))||r.enumerable});return n};var f=(n,e,o)=>(o=n!=null?l(m(n)):{},c(e||!n||!n.__esModule?i(o,\"default\",{value:n,enumerable:!0}):o,n)),j=n=>c(i({},\"__esModule\",{value:!0}),n);var p=y((M,s)=>{s.exports=_jsx_runtime});var R={};b(R,{default:()=>v,frontmatter:()=>w});var t=f(p()),w={title:\"Creating & Managing components outside React\",date:\"2018-07-27\",type:\"Post\",published:!0,description:\"Can you use React in an existing/old JS project? If you do, how do you manage the components?\",tags:\"web-development,javascript,reactjs,react\",banner:\"banner.jpeg\"};function d(n){let e=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",h3:\"h3\",ul:\"ul\",li:\"li\",a:\"a\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"You are probably not starting a new project with React in the frontend. You just want to build some components, make use of the apis that your frontend already consumes and use them in your existing application.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Awesome! You can always do that. Let me outline the workflow here.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Take the built output js file and include it your HTML(application). You would need to add React and ReactDOM to the HTML to mount the components on to the page.\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-javascript\",children:`class WelcomeComp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { name: '' };\n    if (props.name) this.state = { name: props.name };\n  }\n\n  updateName = (name) => this.setState({ name });\n\n  render() {\n    return <p>I am a React Component. Hello {this.state.name}</p>;\n  }\n}\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"The transpiled version of the above code is most probably the output you would be getting from build system. (Webpack isn\\u2019t mandatory. You can use gulp or grunt if you development is setup using them.)\"}),`\n`,(0,t.jsx)(e.p,{children:\"Next up is including things in your application. I am including directly into HTML.\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-html\",children:`<html>\n  <head>\n    <title>Sandbox</title>\n    <meta charset=\"UTF-8\" />\n    <script src=\"<https://unpkg.com/react/umd/react.production.min.js>\"><\\/script>\n    <script src=\"<https://unpkg.com/react-dom/umd/react-dom.production.min.js>\"><\\/script>\n  </head>\n\n  <body>\n    <div id=\"app\"></div>\n    <div id=\"root\"></div>\n\n    <script src=\"build/existing.js\"><\\/script>\n    <script src=\"build/WelcomeComp.js\"><\\/script>\n    <script type=\"text/javascript\">\n      var rootEl = document.getElementById('root');\n      ReactDOM.render(React.createElement(WelcomeComp, null, null), rootEl);\n    <\\/script>\n  </body>\n</html>\n`})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This would mount the component to the root div. Remember you cannot use JSX here as the script in HTML has a type \",(0,t.jsx)(e.code,{children:\"text/javascript\"}),\". So we used \",(0,t.jsx)(e.code,{children:\"React.createElement()\"}),\" instead of \",(0,t.jsx)(e.code,{children:\"<WelcomeComp />\"}),\".\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"The issue\"}),`\n`,(0,t.jsx)(e.p,{children:\"But how would your Component communicate with the existing application? You could be fetching and sending requests from the component itself. Which would need some React code, that isn\\u2019t an issue. But in some cases, you need the component to sync up with existing stores in your application.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Maybe you have an ExtJS store or a RxJS store, maybe a MobX one. How do you sync the component with it? \\u{1F914}\"}),`\n`,(0,t.jsx)(e.h3,{children:\"React ref to our rescue\"}),`\n`,(0,t.jsx)(e.p,{children:\"You can pass a reference to the component and store it as a local variable in the code. All the methods in the React Component can be accessed through those refs. Don\\u2019t quite get it? Here is the code.\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-html\",children:`<script type=\"text/javascript\">\n  var rootEl = document.getElementById('root');\n  var componentProps = {\n    name: 'Balla',\n    ref: function (ref) {\n      this.welcomeComp = ref;\n    },\n  };\n  ReactDOM.render(React.createElement(WelcomeComp, componentProps, null), rootEl);\n\n  setTimeout(function () {\n    this.welcomeComp.updateName('Aravind');\n  }, 2000);\n<\\/script>\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"Syncing is easy now. When ever there is an update, you can just call a method that changes the Component state. See how I did it in a timeout. You can even pass methods that update the store, in the props, and make the Component call it whenever it has to update.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Keep on hacking!\"}),`\n`,(0,t.jsx)(e.h3,{children:\"References\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://reactjs.org/docs/react-without-jsx.html\",children:\"https://reactjs.org/docs/react-without-jsx.html\"})}),`\n`,(0,t.jsxs)(e.li,{children:[\"The transpiler used\\u200A \\u2014 \\u200A\",(0,t.jsx)(e.a,{href:\"https://babeljs.io/repl/\",children:\"https://babeljs.io/repl/\"})]}),`\n`]})]})}function x(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(d,n)})):d(n)}var v=x;return j(R);})();\n;return Component;"
  },
  "_id": "writings/manage-react-components-outside/index.mdx",
  "_raw": {
    "sourceFilePath": "writings/manage-react-components-outside/index.mdx",
    "sourceFileName": "index.mdx",
    "sourceFileDir": "writings/manage-react-components-outside",
    "contentType": "mdx",
    "flattenedPath": "writings/manage-react-components-outside"
  },
  "type": "Post",
  "slug": "/writings/manage-react-components-outside"
}